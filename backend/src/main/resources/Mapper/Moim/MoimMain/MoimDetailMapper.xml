<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="moim.renew.backend.domain.Moim.MoimDetail.Mapper.MoimDetailMapper">

    <resultMap id="moimDetailResultMap" type="MoimDetailEntity">
        <id     property="moimId"       column="Moim_id"/>
        <result property="content"   column="Content" />
        <result property="minPeople" column="Min_people"/>
        <result property="pay" column="Pay"/>
        <result property="approval" column="Approval"/>
    </resultMap>

    <!--  기능 TEST 완료  -->
    <!-- 모임 세부사항 생성 -->
    <insert id="moimofInsert" parameterType="MoimDetailEntity">
        INSERT INTO moim_detail (Moim_id, Content, Min_people, Pay, Approval)
        VALUES (#{moimId}, #{content}, #{minPeople},#{pay}, #{approval})
    </insert>
    <!--  기능 TEST 완료  -->
    <!-- 모임 세부사항 업데이트 -->
    <update id="updatemoimdetailbyResult" parameterType="MoimDetailEntity">
        UPDATE moim_detail
        SET Content = #{content},
        Min_people = #{minPeople},
        Pay = #{pay},
        Approval = #{approval}
        WHERE Moim_id = #{moimId}
    </update>



    <!--  모임 승인 기능에 관한 업데이트  -->
    <update id="updateByApproval">
        UPDATE moim_detail
        SET Approval = #{approval}
        WHERE Moim_id = #{moimId}
    </update>


    <!--  기능 TEST 완료  -->
    <!-- 모임 Id에 따른 세부 정보 조회 -->
    <select id="selectmoimdetailbyResult" parameterType="java.lang.String" resultMap="moimDetailResultMap">
        SELECT Moim_id, Content, Min_people, Pay, Approval FROM moim_detail
        WHERE Moim_id = #{moimId}
    </select>


    <!--  기능 TEST 완료  -->
    <!-- 모임 세부 사항 삭제 -->
    <delete id="deletemoimdetailbyResult" parameterType="java.lang.String">
        DELETE FROM moim_detail
        WHERE Moim_id = #{moimId}
    </delete>

</mapper>
