<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="moim.renew.backend.MoimCategory.CategoryDetail.Mapper.CategoryDetailMapper">

    <resultMap id="CategoryDetailResultMap" type="MoimCategoryDetailEntity">
        <id     property="categoryDetailId"    column="CategoryDetail_id"/>
        <result property="categoryId"          column="Category_id"/>
        <result property="categorisationDetail" column="Category_detail_name"/>
    </resultMap>

    <!-- 특정 ID로 소분류 조회 -->
    <select id="selectCategoryDetailById" parameterType="java.lang.Long" resultMap="CategoryDetailResultMap">
        SELECT CategoryDetail_id, Category_id, Category_detail_name
        FROM category_detail
        WHERE CategoryDetail_id = #{categoryDetailId}
    </select>

    <!-- 특정 카테고리에 속한 소분류 전체 조회 -->
    <select id="selectCategoryDetailByCategoryId" parameterType="java.lang.Long" resultMap="CategoryDetailResultMap">
        SELECT CategoryDetail_id, Category_id, Category_detail_name
        FROM category_detail
        WHERE Category_id = #{categoryId}
    </select>

    <!-- 소분류 삽입 -->
    <insert id="insertCategoryDetail" parameterType="MoimCategoryDetailEntity">
        INSERT INTO category_detail(Category_id, Category_detail_name)
        VALUES(#{categoryId}, #{categorisationDetail})
    </insert>

    <!-- 소분류 수정 -->
    <update id="updateCategoryDetail" parameterType="MoimCategoryDetailEntity">
        UPDATE category_detail
        SET Category_detail_name = #{categorisationDetail}
        WHERE CategoryDetail_id = #{categoryDetailId}
    </update>

    <!-- 소분류 삭제 -->
    <delete id="deleteCategoryDetail" parameterType="java.lang.Long">
        DELETE FROM category_detail WHERE CategoryDetail_id = #{categoryDetailId}
    </delete>

</mapper>
