<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="moim.renew.backend.MoimDetail.Mapper.MoimDetailMapper">

    <resultMap id="moimDetailResultMap" type="moim.renew.backend.MoimDetail.Entity.MoimDetailEntity">
        <id     property="moimId"       column="Moim_id"/>
        <result property="content"   column="Content" />
        <result property="minpeople" column="Min_people"/>
        <result property="pay" column="Pay"/>
        <result property="approval" column="Approval"/>
    </resultMap>

    <!-- 모임 세부사항 생성 -->
    <insert id="moimofInsert" parameterType="moim.renew.backend.MoimDetail.Entity.MoimDetailEntity">
        INSERT INTO moim_detail (Moim_id, Content, Min_people, Pay, Approval)
        VALUES (#{moimId}, #{content}, #{minpeople},#{pay}, #{approval})
    </insert>
    <!-- 모임 세부사항 업데이트 -->
    <update id="updatemoimdetailbyResult" parameterType="moim.renew.backend.MoimDetail.Entity.MoimDetailEntity">
        UPDATE moim_detail
        SET Content = #{content},
        Min_people = #{minpeople},
        Pay = #{pay},
        WHERE Moim_id = #{moimId}
    </update>
    <!--  모임 승인 기능에 관한 업데이트  -->
    <update id="updateByApproval" parameterType="string">
        UPDATE moim_detail
        SET Approval = #{approval}
        WHERE Moim_id = #{moimId}
    </update>

    <!-- 모임 Id에 따른 세부 정보 조회 -->
    <select id="selectmoimdetailbyResult" parameterType="string" resultMap="moimDetailResultMap">
        SELECT Moim_id, Content, Min_people, Pay, Approval FROM moim_detail
        WHERE Moim_id = #{moimId}
    </select>

    <!-- 모임 세부 사항 삭제 -->
    <delete id="deletemoimdetailbyResult" parameterType="string">
        DELETE FROM moim_detail
        WHERE Moim_id = #{moimId}
    </delete>

</mapper>
